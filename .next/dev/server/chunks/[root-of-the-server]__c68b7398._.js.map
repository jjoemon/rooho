{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/joemonjose/software/nextjs26/rooho/app/models/User.ts"],"sourcesContent":["// app/models/User.ts\nimport mongoose, { Schema, models, model, Model } from \"mongoose\";\nimport bcrypt from \"bcryptjs\";\n\n/**\n * 1Ô∏è‚É£ TypeScript interface\n */\nexport interface IUser {\n  name?: string;\n  email: string;\n  password: string;\n  role: \"user\" | \"admin\";\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\n/**\n * 2Ô∏è‚É£ Mongoose schema (DEFINE FIRST)\n */\nconst UserSchema = new Schema<IUser>(\n  {\n    name: { type: String },\n    email: {\n      type: String,\n      required: true,\n      unique: true,\n      index: true,\n    },\n    password: {\n      type: String,\n      required: true,\n      select: false, // üîê never return password by default\n    },\n    role: {\n      type: String,\n      enum: [\"user\", \"admin\"],\n      default: \"user\",\n    },\n  },\n  { timestamps: true }\n);\n\n/**\n * 3Ô∏è‚É£ Middleware (AFTER schema definition)\n */\nUserSchema.pre(\"save\", async function () {\n  if (!this.isModified(\"password\")) return;\n  this.password = await bcrypt.hash(this.password, 12);\n});\n\n/**\n * 4Ô∏è‚É£ Export model (hot-reload safe)\n */\nconst User: Model<IUser> =\n  models.User || model<IUser>(\"User\", UserSchema);\n\nexport default User;\n"],"names":[],"mappings":";;;;AAAA,qBAAqB;AACrB;AACA;;;AAcA;;CAEC,GACD,MAAM,aAAa,IAAI,kKAAM,CAC3B;IACE,MAAM;QAAE,MAAM;IAAO;IACrB,OAAO;QACL,MAAM;QACN,UAAU;QACV,QAAQ;QACR,OAAO;IACT;IACA,UAAU;QACR,MAAM;QACN,UAAU;QACV,QAAQ;IACV;IACA,MAAM;QACJ,MAAM;QACN,MAAM;YAAC;YAAQ;SAAQ;QACvB,SAAS;IACX;AACF,GACA;IAAE,YAAY;AAAK;AAGrB;;CAEC,GACD,WAAW,GAAG,CAAC,QAAQ;IACrB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa;IAClC,IAAI,CAAC,QAAQ,GAAG,MAAM,8IAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AACnD;AAEA;;CAEC,GACD,MAAM,OACJ,kKAAM,CAAC,IAAI,IAAI,IAAA,iKAAK,EAAQ,QAAQ;uCAEvB"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/joemonjose/software/nextjs26/rooho/app/lib/mongoose.ts"],"sourcesContent":["// /app/lib/mongoose.ts\nimport mongoose, { Mongoose } from \"mongoose\";\n\nconst MONGODB_URI = process.env.MONGODB_URI;\n\nif (!MONGODB_URI) {\n  throw new Error(\"‚ùå MONGODB_URI is not defined\");\n}\n\nconst uri: string = MONGODB_URI;\n\ninterface MongooseCache {\n  conn: Mongoose | null;\n  promise: Promise<Mongoose> | null;\n}\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var mongoose: MongooseCache | undefined;\n}\n\nglobal.mongoose ||= { conn: null, promise: null };\n\nexport async function dbConnect(): Promise<Mongoose> {\n  if (global.mongoose!.conn) {\n    return global.mongoose!.conn;\n  }\n\n  if (!global.mongoose!.promise) {\n    mongoose.set(\"autoIndex\", true);\n\n    global.mongoose!.promise = mongoose.connect(uri, {\n      bufferCommands: false,\n    });\n  }\n\n  const conn = await global.mongoose!.promise;\n  global.mongoose!.conn = conn;\n\n  console.log(\"‚úÖ MongoDB connected:\", conn.connection.host);\n\n  return conn;\n}\n"],"names":[],"mappings":";;;;AAAA,uBAAuB;AACvB;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAEA,MAAM,MAAc;AAYpB,OAAO,QAAQ,KAAK;IAAE,MAAM;IAAM,SAAS;AAAK;AAEzC,eAAe;IACpB,IAAI,OAAO,QAAQ,CAAE,IAAI,EAAE;QACzB,OAAO,OAAO,QAAQ,CAAE,IAAI;IAC9B;IAEA,IAAI,CAAC,OAAO,QAAQ,CAAE,OAAO,EAAE;QAC7B,mKAAQ,CAAC,GAAG,CAAC,aAAa;QAE1B,OAAO,QAAQ,CAAE,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,KAAK;YAC/C,gBAAgB;QAClB;IACF;IAEA,MAAM,OAAO,MAAM,OAAO,QAAQ,CAAE,OAAO;IAC3C,OAAO,QAAQ,CAAE,IAAI,GAAG;IAExB,QAAQ,GAAG,CAAC,wBAAwB,KAAK,UAAU,CAAC,IAAI;IAExD,OAAO;AACT"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///Users/joemonjose/software/nextjs26/rooho/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["// app/api/auth/[...nextauth]/route.ts\nimport NextAuth, { type NextAuthOptions } from \"next-auth\";\nimport Credentials from \"next-auth/providers/credentials\";\nimport bcrypt from \"bcryptjs\";\n\nimport User from \"@/app/models/User\";\nimport { dbConnect } from \"@/app/lib/mongoose\";\n\nexport const authOptions: NextAuthOptions = {\n  providers: [\n    Credentials({\n      name: \"Credentials\",\n      credentials: {\n        email: { type: \"email\" },\n        password: { type: \"password\" },\n      },\n\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials.password) return null;\n\n        await dbConnect();\n\n        const user = await User.findOne({ email: credentials.email }).select(\"+password\");\n        if (!user) return null;\n\n        const isValid = await bcrypt.compare(credentials.password, user.password);\n        if (!isValid) return null;\n\n        return {\n          id: user._id.toString(),\n          email: user.email,\n          name: user.name,\n          role: user.role,\n        };\n      },\n    }),\n  ],\n\n  session: {\n    strategy: \"jwt\",\n  },\n\n  callbacks: {\n    async jwt({ token, user }) {\n      if (user) {\n        token.id = user.id;\n        token.role = user.role;\n      }\n      return token;\n    },\n\n    async session({ session, token }) {\n      session.user.id = token.id as string;\n      session.user.role = token.role as \"user\" | \"admin\";\n      return session;\n    },\n  },\n};\n\nconst handler = NextAuth(authOptions);\nexport { handler as GET, handler as POST };\n"],"names":[],"mappings":";;;;;;;;AAAA,sCAAsC;AACtC;AACA;AACA;AAEA;AACA;;;;;;AAEO,MAAM,cAA+B;IAC1C,WAAW;QACT,IAAA,qKAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,MAAM;gBAAQ;gBACvB,UAAU;oBAAE,MAAM;gBAAW;YAC/B;YAEA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,YAAY,QAAQ,EAAE,OAAO;gBAEzD,MAAM,IAAA,qIAAS;gBAEf,MAAM,OAAO,MAAM,kIAAI,CAAC,OAAO,CAAC;oBAAE,OAAO,YAAY,KAAK;gBAAC,GAAG,MAAM,CAAC;gBACrE,IAAI,CAAC,MAAM,OAAO;gBAElB,MAAM,UAAU,MAAM,8IAAM,CAAC,OAAO,CAAC,YAAY,QAAQ,EAAE,KAAK,QAAQ;gBACxE,IAAI,CAAC,SAAS,OAAO;gBAErB,OAAO;oBACL,IAAI,KAAK,GAAG,CAAC,QAAQ;oBACrB,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;IAED,SAAS;QACP,UAAU;IACZ;IAEA,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI;YACxB;YACA,OAAO;QACT;QAEA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;YAC1B,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAC9B,OAAO;QACT;IACF;AACF;AAEA,MAAM,UAAU,IAAA,kJAAQ,EAAC"}}]
}